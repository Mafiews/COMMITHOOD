
<!-- yizhu: banner part -->
<%= render 'shared/navbar-home' %>
<div class="banner-hood d-flex align-items-center" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1525026198548-4baa812f1183?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1533&q=80')">
<div class="container title-info">
  <div class="row justify-content-center">
    <div class="col-10">
      <!-- site title info -->
      <div class="app-title">
        <h1 class="mt-5">Commit'hood</h1>
        <h3 class="mt-3">Engagez-vous à deux pas de chez vous !</h3>
        <!-- <h3>Use your free time wisely to do something meaningful!</h3> -->
      </div>
        <div class="search-bar mt-5">
        <%= form_tag events_path, method: "get" do %>
          <div class="search-select col-5">
            <%= select_tag :user_cause, options_for_select(Cause::CAUSES), class: 'select2', :multiple => true %>
          </div>
          <%= text_field_tag :address, "", required: false, id: "event-address", label: false, placeholder: "Votre adresse", class: 'mr-3' %>
          <%= submit_tag "Rechercher 🔍", class: "btn btn-success text-white ml-3" %>
        <% end %>
        </div>
      </div>
      <!-- site title info end -->
    </div>
  </div>
</div>


<!-- yizhu create 3 cards to show the lastest 3 events registed under the banner, in form of card -->
<div class="container event-cards mt-3" id="event-recos">
  <h3 class="my-4">Un peu d'inspiration 💭</h3>

  <div class="row justify-content-around">
    <% @events.each do |event| %>
      <div class="card card-event-home" style="width: 18rem;">
        <%= cl_image_tag event.photo.key, alt: "event photo", height: 200, crop: :fill %>
        <div class="bookmark-like-red">
          <% if user_signed_in? %>
            <% if current_user.liked? event %>
              <%= link_to unlike_home_event_path(event), class: "unlike-event", remote: true, method: :put do %>
                <i class="fas fa-bookmark" id="unlike"></i>
              <% end %>
            <% else %>
              <%= link_to like_home_event_path(event), class: "interested", remote: true, method: :put do %>
                <i class="far fa-bookmark" id="like-event"></i>
              <% end %>
            <% end %>
            <% else %>
            <i class="far fa-bookmark" id="like-event"></i>
          <% end  %>
        </div>

        <!-- follow button Ilana -->

        <div class="follow-me">
          <% if user_signed_in?  %>
            <% if current_user.liked? event.ngo %>
              <%= link_to ngo_unlike_path(event.ngo.id), class: "unfollow-ngo", remote: :true, method: :put do %>
                <i class="fas fa-heart" id="unlike"></i>
              <% end %>
            <% else %>
              <%= link_to ngo_like_path(event.ngo.id), class: "follow-ngo", remote: :true, method: :put do %>
                <i class="far fa-heart" id="like-ngo"></i>
              <% end %>
            <% end  %>
          <% else %>
            <i class="far fa-heart" id="like-ngo"></i>
          <% end %>
      </div>
      <!-- end of follow-button -->

        <div class="card-body">
          <h5 class="card-title"><%= event.name %></h5>
          <p class="card-text "><%= event.description.truncate_words(20) %></p>
          <p class="card-address"><i class="fas fa-map-marker-alt"></i> <%= event.address %></p>
          <p class="card-address"><i class="far fa-calendar-alt"></i><% if event.start_date.to_date == event.end_date.to_date %>
          <%= I18n.l(event.start_date, locale: :fr) %> - <%= I18n.l event.end_date, locale: :fr, format: :hours %>
          <% else %>
          <%= I18n.l(event.start_date, locale: :fr) %> - <%= I18n.l(event.end_date, locale: :fr) %>
          <% end %>
          </p>
          <p class="card-address"><i class="fas fa-user-circle"></i> Places disponibles : <%= event.seats_left %></p>
          <%= link_to "Détails", event_path(event), class:"btn btn-success btn-green" %>
        </div>
      </div>
    <% end %>
    </div>
    <!-- Matt - adding slick carousel -->
    <div class="carousel">
      <div>1</div>
      <div>2</div>
      <div>3</div>
    </div>

    <script type="text/javascript">
      $(document).ready(function(){
        $('.carousel').slick({
          name: value
        });
      });
    </script>
    <!-- Matt - end of slick carousel -->

    <!-- Matt : bootstrap carousel -->
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img class="d-block w-100" src="https://images.unsplash.com/photo-1527410571717-605174968bd2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1950&q=80" alt="First slide">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1953&q=80" alt="Second slide">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="https://images.unsplash.com/photo-1551024709-8f23befc6f87?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2025&q=80" alt="Third slide">
        </div>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    <!-- end of bootstrap carousel -->
  </div>
